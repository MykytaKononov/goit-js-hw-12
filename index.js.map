{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '48551671-8e0bd0e05b8a9090cbea8e4d9';\nlet page = 1;\n\nexport async function searchImages(searchrequest) {\n  const URL = `https://pixabay.com/api/`;\n  try {\n    if (!searchrequest) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter search request!',\n        position: 'topRight',\n      });\n      return;\n    }\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: searchrequest,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    page += 1;\n    return response.data.hits;\n  } catch (error) {\n    console.error('REQUEST ERROR', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again!',\n      position: 'topRight',\n    });\n    return [];\n  }\n}\n\nexport function resetPage() {\n  page = 1;\n}\n\nexport function plusPage() {\n  page += 1;\n}\n\nexport function getPage() {\n  return page;\n}\n","import iziToast from 'izitoast';\n\nexport function displayImages(images) {\n  const gallery = document.getElementById('gallery');\n\n  if (images.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const prefab = images\n    .map(\n      image => `\n    <div class=\"image-card\">\n      <a href=\"${image.largeImageURL}\" class=\"image-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image\" />\n      </a>\n      <div class=\"image-info\">\n        <p class=\"image-likes text\">Likes</p>\n        <p class=\"image-views text\">Views</p>\n        <p class=\"image-downloads text\">Downloads</p>\n        <p class=\"image-comments text\">Comments</p>\n        <p class=\"number\">${image.likes}</p>\n        <p class=\"number\">${image.views}</p>\n        <p class=\"number\">${image.downloads}</p>\n        <p class=\"number\">${image.comments}</p>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', prefab);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport {\n  resetPage,\n  searchImages,\n  plusPage,\n  getPage,\n} from './js/pixabay-api.js';\nimport { displayImages } from './js/render-function.js';\n\nconst gallery = document.getElementById('gallery');\nconst pagebutton = document.querySelector('.pagebutton');\nlet previousSearchRequest = '';\nconst maxpages = 10;\n\nconst lightbox = new SimpleLightbox('.image-link', {\n  captionsData: 'alt',\n  captionDelay: 500,\n});\n\nasync function handleSearch(event, shouldReset) {\n  event.preventDefault();\n\n  const searchrequest = document.getElementById('input').value.trim();\n\n  if (!searchrequest) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter search request!',\n      position: 'topRight',\n    });\n    return;\n  }\n  if (shouldReset) {\n    resetPage();\n    previousSearchRequest = searchrequest;\n    gallery.innerHTML = '';\n  } else {\n    plusPage();\n  }\n\n  const loader = document.querySelector('.loader');\n  loader.style.visibility = 'visible';\n\n  try {\n    const images = await searchImages(searchrequest);\n    if (images.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      pagebutton.style.visibility = 'hidden';\n    } else {\n      displayImages(images);\n      lightbox.refresh();\n\n      setTimeout(() => {\n        const imagecard = document.querySelector('.image-card');\n        if (imagecard) {\n          const { height: cardHeight } = imagecard.getBoundingClientRect();\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n      }, 100);\n\n      if (getPage() >= maxpages) {\n        pagebutton.style.visibility = 'hidden';\n        iziToast.warning({\n          title: 'Warning',\n          message: 'You have reached the last page!',\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    console.error('RENDER ERROR', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.visibility = 'hidden';\n    if (gallery.children.length > 0 && getPage() < maxpages) {\n      pagebutton.style.visibility = 'visible';\n    } else {\n      pagebutton.style.visibility = 'hidden';\n    }\n  }\n}\n\ndocument.getElementById('form').addEventListener('submit', event => {\n  handleSearch(event, true);\n});\ndocument.getElementById('page-button').addEventListener('click', event => {\n  handleSearch(event, false);\n});\n"],"names":["API_KEY","page","searchImages","searchrequest","URL","iziToast","response","axios","error","resetPage","plusPage","getPage","displayImages","images","gallery","prefab","image","pagebutton","maxpages","lightbox","SimpleLightbox","handleSearch","event","shouldReset","loader","imagecard","cardHeight"],"mappings":"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"}