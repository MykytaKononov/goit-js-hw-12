{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst API_KEY = '48551671-8e0bd0e05b8a9090cbea8e4d9';\nlet page = 1;\n\nexport async function searchImages(searchrequest) {\n  const URL = `https://pixabay.com/api/`;\n  try {\n    if (page > 10) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'You have reached the last page!',\n        position: 'topRight',\n      });\n      return [];\n    }\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: searchrequest,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n\n    return response.data.hits;\n  } catch (error) {\n    console.error('REQUEST ERROR', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again!',\n      position: 'topRight',\n    });\n  }\n}\nexport function resetPage() {\n  page = 1;\n}\nexport function plusPage() {\n  page += 1;\n}\n","import iziToast from 'izitoast';\n\nexport function displayImages(images) {\n  const gallery = document.getElementById('gallery');\n\n  if (images.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  images.forEach(image => {\n    const imagecard = document.createElement('div');\n    imagecard.classList.add('image-card');\n\n    const a = document.createElement('a');\n    a.href = image.largeImageURL;\n    a.classList.add('image-link');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.classList.add('image');\n\n    const info = document.createElement('div');\n    info.classList.add('image-info');\n    info.innerHTML = `\n        <p class=\"image-likes text\">Likes</p>\n        <p class=\"image-views text\">Views</p>\n        <p class=\"image-downloads text\">Downloads</p>\n        <p class=\"image-comments text\">Comments</p>\n        <p class=\"number\">${image.likes}</p>\n        <p class=\"number\">${image.views}</p>\n        <p class=\"number\">${image.downloads}</p>\n        <p class=\"number\">${image.comments}</p>\n        `;\n\n    a.appendChild(img);\n    imagecard.appendChild(a);\n    imagecard.appendChild(info);\n    gallery.appendChild(imagecard);\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { resetPage, searchImages, plusPage } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-function.js';\n\nconst gallery = document.getElementById('gallery');\nconst pagebutton = document.querySelector('.pagebutton');\nlet previousSearchRequest = '';\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const searchrequest = document.getElementById('input').value.trim();\n\n  if (!searchrequest) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter search request!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (previousSearchRequest !== searchrequest) {\n    resetPage();\n    previousSearchRequest = searchrequest;\n  } else {\n    plusPage();\n  }\n  const loader = document.querySelector('.loader');\n  loader.style.visibility = 'visible';\n\n  try {\n    const images = await searchImages(searchrequest);\n    displayImages(images);\n    new SimpleLightbox('.image-link', {\n      captionsData: 'alt',\n      captionDelay: 500,\n    }).refresh();\n  } catch (error) {\n    console.error('RENDER ERROR', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load images. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.visibility = 'hidden';\n    if (gallery.children.length > 0) {\n      pagebutton.style.visibility = 'visible';\n    } else {\n      pagebutton.style.visibility = 'hidden';\n    }\n  }\n}\n\ndocument.getElementById('form').addEventListener('submit', event => {\n  gallery.innerHTML = '';\n  handleSearch(event);\n});\ndocument.getElementById('page-button').addEventListener('click', handleSearch);\n"],"names":["API_KEY","page","searchImages","searchrequest","URL","iziToast","axios","error","resetPage","plusPage","displayImages","images","gallery","image","imagecard","a","img","info","pagebutton","previousSearchRequest","handleSearch","event","loader","SimpleLightbox"],"mappings":"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"}